"use strict";angular.module("testControllerViewsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router"]).config(["$routeProvider","$stateProvider",function(a,b){b.state("home",{})}]),angular.module("testControllerViewsApp").controller("MainCtrl",["$scope",function(a){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.values=[125,9595,135641,6546464,6486484,445],a.templateUrl="views/main.html"}]),angular.module("testControllerViewsApp").controller("AboutCtrl",["$scope",function(a){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.toto="hello toto",a.templateUrl="views/about.html",a.listelement=["john","jake","peter","patrik"]}]),angular.module("testControllerViewsApp").directive("listdirective",function(){return{templateUrl:"views/listdirectiveview.html",restrict:"E",replace:!0,link:function(a,b,c){}}}),angular.module("testControllerViewsApp").factory("getBikes",["$http","$q",function(a,b){var c="cd68da53009a674d943220ef0a67623682aa00ce";return{getListBike:function(){return a.get("https://api.jcdecaux.com/vls/v1/stations?contract=dublin&apiKey="+c)},getCityList:function(){return a.get("https://api.jcdecaux.com/vls/v1/contracts?&apiKey="+c)},getCityStations:function(d){var e=b.defer();return a.get("https://api.jcdecaux.com/vls/v1/stations?contract="+d+"&apiKey="+c).then(function(a){e.resolve(a)},function(a){e.reject(a)}),e.promise}}}]),angular.module("testControllerViewsApp").controller("MasterCtrl",["$scope",function(a){a.data=[{id:1,name:"toto"},{id:2,name:"etet"},{id:3,name:"xaxa"},{id:4,name:"ikik"}],a.selected="",a.$on("_displayStations",function(b,c){a.$broadcast("_displayStations::send",c)})}]),angular.module("testControllerViewsApp").directive("mylist",function(){return{templateUrl:"views/mylist.html",restrict:"AE",controller:"ListcontrollerCtrl",controllerAs:"listCtrl",scope:!0}}),angular.module("testControllerViewsApp").controller("ListcontrollerCtrl",["$scope","getBikes",function(a,b){a.citySelected=!1,a.citySelected=!1,a.getData=function(c){c?(a.citySelected=!0,b.getCityStations(c).then(function(b){a.data=b.data,a.$emit("_displayStations",b.data)},function(a){console.log("Query error::",a)})):(a.citySelected=!1,b.getCityList().then(function(b){a.data=b.data},function(a){console.log("Query error::",a)}))},a.getData(!1),a.selectItem=function(b){console.log(a.data[b].name),a.citySelected||a.getData(a.data[b].name)}}]),angular.module("testControllerViewsApp").controller("MapCtrl",["$scope",function(a){a.renderModeList=["heatmap","marker","circle","heatmap bikes available","heatmap stands available"],a.renderMode="heatmap",a.heatmap=null,a.circleList=[];var b={zoom:12,center:new google.maps.LatLng(53.3498,-6.2603),mapTypeId:google.maps.MapTypeId.TERRAIN};a.map=new google.maps.Map(document.getElementById("map"),b),a.bounds=new google.maps.LatLngBounds,a.markers=[];var c=new google.maps.InfoWindow;this.$onInit=function(){console.log("on init")},this.$onChanges=function(b){console.log(b),b.cityList&&b.cityList.currentValue&&a.newData(b.cityList.currentValue,!0)},a.changeRender=function(b){a.renderMode=b,a.data&&a.newData(a.data,!1)},a.newData=function(b,c){if(a.data=b,a.clearMarker(),c&&(a.bounds=new google.maps.LatLngBounds),"heatmap"===a.renderMode){var f=[];for(var g in b){var h=d(b[g]),i=h.lng,j=h.lat,k=new google.maps.LatLng(j,i);f.push(k),a.bounds.extend(k)}a.heatmap=new google.maps.visualization.HeatmapLayer({data:f,radius:20,map:a.map}),a.heatmap.setMap(a.map)}else if("marker"===a.renderMode)for(var g in b)e(d(b[g]));else if("circle"===a.renderMode)for(var g in b){var h=d(b[g]),k={lat:h.lat,lng:h.lng},l=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:a.map,center:k,radius:100});a.circleList.push(l),a.markers.push(l),a.bounds.extend(k)}else if("heatmap bikes available"===a.renderMode){var f=[];for(var g in b){var h=d(b[g]),m=10*(h.bikes/h.totalStands).toFixed(1),k=new google.maps.LatLng(h.lat,h.lng);f.push({location:k,weight:m}),a.bounds.extend(k)}a.heatmap=new google.maps.visualization.HeatmapLayer({data:f,radius:20,map:a.map})}else if("heatmap stands available"===a.renderMode){var f=[];for(var g in b){var h=d(b[g]),m=10*(h.freeStands/h.totalStands).toFixed(1),k=new google.maps.LatLng(h.lat,h.lng);f.push({location:k,weight:m}),a.bounds.extend(k)}a.heatmap=new google.maps.visualization.HeatmapLayer({data:f,radius:20,map:a.map})}c&&a.map.fitBounds(a.bounds)};var d=function(a){return{lng:a.position.lng,lat:a.position.lat,name:a.name,status:a.status,address:a.address,totalStands:a.bike_stands,bikes:a.available_bikes,freeStands:a.available_bike_stands}};a.clearMarker=function(b){for(var c in a.markers)a.markers[c].setMap(null);a.markers=[],a.heatmap&&a.heatmap.setMap(null)};var e=function(b){var d=new google.maps.Marker({map:a.map,position:new google.maps.LatLng(b.lat,b.lng),title:b.name});d.content='<div class="infoWindowContent">'+b.address+"</div>",google.maps.event.addListener(d,"click",function(){c.setContent("<h4>"+d.title+"</h4>"+d.content),c.open(a.map,d)}),a.markers.push(d),a.bounds.extend(d.getPosition())}}]),angular.module("testControllerViewsApp").component("map",{bindings:{city:"<",cityList:"<"},controller:"MapCtrl",templateUrl:"views/map.html"}),angular.module("testControllerViewsApp").controller("StationinfoCtrl",["$scope","getBikes",function(a,b){a.citySelected=!1,a.getData=function(c){c?(a.citySelected=!0,b.getCityStations(c).then(function(b){a.data=b.data},function(a){console.log("Query Station error::",a)})):(a.citySelected=!1,b.getCityList().then(function(b){a.data=b.data},function(a){console.log("Query City error::",a)}))},a.getData(!1),a.selectItem=function(b){console.log(a.data[b].name),a.citySelected||a.getData(a.data[b].name)}}]),angular.module("testControllerViewsApp").component("stationinfo",{templateUrl:"views/stationInfo.html",controller:"StationinfoCtrl",bindings:{city:"<",updateValue:"&"}}),angular.module("testControllerViewsApp").controller("ApplicationcontrollerCtrl",["$scope","getBikes",function(a,b){this.defaultCity="dublin",this.stationList=!1,this.updateValue=function(a){if(a.name!=this.defaultCity){this.defaultCity=a.name;var c=this;b.getCityStations(this.defaultCity).then(function(a){c.stationList=a.data}),console.log(this.cityList)}},this.successCallback=function(a){this.cityList=a.data}}]),angular.module("testControllerViewsApp").component("application",{templateUrl:"views/application.html",controller:"ApplicationcontrollerCtrl"}),angular.module("testControllerViewsApp").run(["$templateCache",function(a){a.put("views/about.html",'<div> <h4>about template</h4> <div ng-repeat="e in listelement"> <listdirective val="{{e}}">{{e}}</listdirective> </div> </div>'),a.put("views/application.html",'<div> <p>AppCtrl - defautl city: {{$ctrl.defaultCity}}</p> <div class="col-sm-2"> <stationinfo city="$ctrl.defaultCity" update-value="$ctrl.updateValue(value)"></stationinfo> </div> <div class="col-sm-10"> <map city="$ctrl.defaultCity" city-list="$ctrl.stationList"></map> </div> </div>'),a.put("views/listdirectiveview.html","<div> {{e}} + {{val}} </div>"),a.put("views/main.html",'<div class="jumbotron"> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/map.html",'<div> {{$ctrl.city}} <div class="btn-group"> <label uncheckable class="btn btn-default" ng-model="renderMode" uib-btn-radio="{{render}}" ng-repeat="render in renderModeList" ng-click="changeRender(render)">{{render}}</label> </div> <div id="map"></div> </div>'),a.put("views/masterview.html","<p>This is the masterview view.</p>"),a.put("views/mylist.html",'<div id="list"> <div ng-if="citySelected"> <button ng-click="getData(false)" type="button" class="btn btn-info btn-sm"> <span class="glyphicon glyphicon-circle-arrow-left"></span> Back </button> </div> <input type="text" ng-model="test"> <div ng-repeat="item in data | filter:test" ng-click="selectItem($index)"> {{item.name}} </div> </div>'),a.put("views/stationInfo.html",'<div> {{$ctrl.city}} <div ng-if="citySelected"> <button ng-click="getData(false)" type="button" class="btn btn-info btn-sm"> <span class="glyphicon glyphicon-circle-arrow-left"></span> Back </button> </div> <div id="list"> <input type="text" ng-model="test"> <!--<div ng-repeat="item in data | filter:test" ng-click="selectItem($index)" >\r\n            {{item.name}}\r\n        </div>--> <div ng-repeat="item in data | filter:test" ng-click="$ctrl.updateValue({value:data[$index]})"> {{item.name}} </div> </div> </div>')}]);